<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('View Entry - Daily Diary')}"></head>
<body>
<div th:replace="~{fragments/layout :: header}"></div>

<main class="container-narrow">
    <div class="paper">
        <div style="margin-bottom: 20px;">
            <a th:href="@{/diary/dashboard}" class="btn">Back to Dashboard</a>
        </div>

        <article>
            <h1 th:text="${diary.title}" style="margin-bottom: 15px;"></h1>

            <div class="text-muted" style="margin-bottom: 30px; padding-bottom: 15px; border-bottom: 1px solid #d4c4b0;">
                <small>
                    <span th:text="${#temporals.format(diary.entryDate, 'EEEE, MMMM dd, yyyy')}"></span>
                    <span style="margin: 0 10px;">|</span>
                    Created: <span th:text="${#temporals.format(diary.createdAt, 'MMM dd, yyyy HH:mm')}"></span>
                    <span th:if="${diary.updatedAt != diary.createdAt}">
                        <span style="margin: 0 10px;">|</span>
                        Updated: <span th:text="${#temporals.format(diary.updatedAt, 'MMM dd, yyyy HH:mm')}"></span>
                    </span>
                </small>
            </div>

            <div style="white-space: pre-wrap; line-height: 1.8; margin-bottom: 30px;"
                 th:text="${diary.content}">
            </div>

            <div style="padding-top: 20px; border-top: 1px solid #d4c4b0; display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                <form th:action="@{/diary/edit/{id}(id=${diary.id})}" method="get" style="display: inline;">
                    <button type="submit" class="btn btn-primary">Edit Entry</button>
                </form>
                <button type="button" class="btn btn-primary" onclick="window.print()">Print</button>
                <form th:action="@{/diary/delete/{id}(id=${diary.id})}" method="post"
                      onsubmit="return confirm('Are you sure you want to delete this entry?');" style="display: inline;">
                    <button type="submit" class="btn btn-primary">Delete</button>
                </form>
            </div>
        </article>
    </div>
</main>

<div th:replace="~{fragments/layout :: footer}"></div>

<style media="print">
    header, .btn, footer { display: none !important; }
    .paper { box-shadow: none !important; padding: 0 !important; }
</style>
</body>
</html>
